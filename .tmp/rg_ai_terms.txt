.gitignore:14:/coverage
ANALISE_DO_PROJETO.md:27:    - Reduzir a fragmentação da informação.
ANALISE_DO_PROJETO.md:34:- **Ações Executadas (Baseado no histórico do prompt):**
.markdownlint.jsonc:3:  // Keep a pragmatic baseline: enforce structure, skip line length and inline HTML.
package-lock.json:491:      "integrity": "sha512-sGnvb5dmrJaKEZ+LDIpguvdX3bDlEllmv4/ClQ9awcmCZrlx5jQyyMWFM5kBI+EyNOCDDiKk8il0zeuX3Zlg/w==",
package-lock.json:2971:    "node_modules/@supabase/storage-js": {
package-lock.json:2973:      "resolved": "https://registry.npmjs.org/@supabase/storage-js/-/storage-js-2.89.0.tgz",
package-lock.json:2994:        "@supabase/storage-js": "2.89.0"
package-lock.json:3984:    "node_modules/agent-base": {
package-lock.json:3986:      "resolved": "https://registry.npmjs.org/agent-base/-/agent-base-7.1.4.tgz",
package-lock.json:5737:      "integrity": "sha512-9fSjSaos/fRIVIp+xSJlE6lfwhES7LNtKaCBIamHsjr2na1BiABJPo0mOjjz8GJDURarmCPGqaiVg5mfjb98CQ==",
package-lock.json:6039:    "node_modules/https-proxy-agent": {
package-lock.json:6041:      "resolved": "https://registry.npmjs.org/https-proxy-agent/-/https-proxy-agent-7.0.6.tgz",
package-lock.json:6046:        "agent-base": "^7.1.2",
package-lock.json:7250:      "integrity": "sha512-RDBrHEMSxVFLg6xvnXmb1Ayr2WzLAWjeSATAoxwKYJV94TeNavgoIdA0a9ytzDSVzBy2YKFK+emCPOEibLeCrg==",
package-lock.json:9114:        "https-proxy-agent": "^7.0.2",
package-lock.json:9428:      "integrity": "sha512-Q1/6yNUmCpH94fbgMUMg2/BSAr/6U7GBk61kZTv1/asghQOWOjTlp9K8mixS5NcJmm2creY+UFfGeW/+OcA64A==",
html/modelo_final_aparencia_pagina_do_paciente.htm:59:      cursor: pointer;
docs/MODULE_STATUS.md:28:  - P1: Runbooks de lacunas (auditoria endpoint; storage de fotos) — esqueleto entregue; evidências vinculadas no ONBOARDING.
docs/runbooks/storage-photos-aba01.md:1:# Runbook — Storage de Fotos (Pacientes ABA01)
docs/runbooks/storage-photos-aba01.md:11:- Supabase Storage habilitado.
docs/runbooks/storage-photos-aba01.md:22:3) **Criar policies (Storage)**
docs/runbooks/storage-photos-aba01.md:51:- `storage.objects` (Supabase).
html/comparativo-fluent.html:101:      cursor: pointer;
html/comparativo-fluent.html:191:      cursor: pointer;
html/comparativo-fluent.html:326:      cursor: pointer;
html/comparativo-fluent.html:363:      cursor: pointer;
docs/process/ai/README.md:3:Esta pasta contém documentos, guias e templates relacionados ao uso de assistentes de IA (como o Gemini) no desenvolvimento da plataforma Conecta Care.
docs/process/ai/README.md:9:- **[gemini.md](./gemini.md)**: O **Manual Mestre** que governa a operação do assistente Gemini neste repositório. Leitura obrigatória.
docs/process/ai/gemini.md:1:# gemini.md — Manual Mestre do Gemini (executor de repo) — Conecta Care
docs/process/ai/gemini.md:3:> **Função deste documento:** ser o “manual operacional mestre” do Gemini Local dentro do repositório `conecta-care-platform`.  
docs/process/ai/gemini.md:8:> **Regra central:** o Gemini **executa decisões** — não cria decisões de produto sem ordem explícita do Renato.
docs/process/ai/gemini.md:20:## 1) Papel do Gemini neste projeto
docs/process/ai/gemini.md:371:Se você seguir este `gemini.md`, o Conecta Care:
supabase/config.toml:88:# OpenAI API Key to use for Supabase AI in the Supabase Studio.
supabase/config.toml:89:openai_api_key = "***REDACTED***"
supabase/config.toml:103:[storage]
supabase/config.toml:108:# Uncomment to configure local storage buckets
supabase/config.toml:109:# [storage.buckets.images]
supabase/config.toml:116:# [storage.s3_protocol]
supabase/config.toml:120:# [storage.image_transformation]
supabase/config.toml:125:[storage.analytics]
supabase/config.toml:132:# [storage.analytics.buckets.my-warehouse]
supabase/config.toml:134:# Store vector embeddings in S3 for large and durable datasets
supabase/config.toml:136:[storage.vector]
supabase/config.toml:141:# Vector Buckets is available to Supabase Pro plan.
supabase/config.toml:142:# [storage.vector.buckets.documents-openai]
supabase/config.toml:373:# Configures Postgres storage engine to use OrioleDB (S3)
docs/runbooks/security-backups-access-rotation.md:57:- Não armazenar dumps fora de storage seguro.
docs/architecture/OPEN_TODO.md:58:  Evidências: `docs/runbooks/auditoria-endpoint.md`, `docs/runbooks/storage-photos-aba01.md`, `docs/runbooks/security-incident-response.md`, `docs/runbooks/security-backups-access-rotation.md`, `docs/runbooks/security-secrets-scanning.md`, `docs/reviews/analise-governanca-estrutura-2025-12-19/RUNBOOKS_FINAL_REVIEW.md`.
docs/runbooks/review-workflow.md:31:5) Avaliar feedback dos revisores automáticos (Codex Web / Vercel Agent)
scripts/docs-link-check.mjs:79:    const fullMatchIndex = match.index;
scripts/docs-link-check.mjs:80:    if (fullMatchIndex > 0 && content[fullMatchIndex - 1] === '!') {
docs/architecture/decisions/ADR-004-ui-dynamics-standard.md:19:- UI livre por módulo: rejeitado por fragmentação visual e custo de manutenção.
docs/process/ai/AI_TOOLING.md:14:**Uso:** discutir arquitetura, criar contratos de abas, definir padrões, gerar prompts para o Codex, revisar decisões e manter consistência do sistema.
docs/process/ai/AI_TOOLING.md:22:### 4) Vercel Agent — Revisão automática
docs/process/ai/AI_TOOLING.md:25:**Regra:** considerar o agente como um “revisor adicional”; a decisão final é do mantenedor.
docs/runbooks/ONBOARDING.md:77:- Storage de fotos (ABA01) — políticas/RLS e fluxo de upload: [docs/runbooks/storage-photos-aba01.md](./storage-photos-aba01.md)
docs/archive/PROJECT_IMMERSION_REPORT.md:12:- **Backend**: Supabase (PostgreSQL, Auth, Storage).
docs/archive/PROJECT_IMMERSION_REPORT.md:33:4. **Actions**: Implementação das lógicas de negócio (Server Actions) que interagem com o banco de dados.
docs/repo_antigo/schema_current.sql:407:CREATE TYPE "public"."storage_provider_enum" AS ENUM (
docs/repo_antigo/schema_current.sql:416:ALTER TYPE "public"."storage_provider_enum" OWNER TO "postgres";
docs/repo_antigo/schema_current.sql:553:        'coverage', json_build_object(
docs/repo_antigo/schema_current.sql:742:      tenant_id, actor_id, ip_address, user_agent, action, entity_table, entity_id, changes, reason, route_path, created_at
docs/repo_antigo/schema_current.sql:1384:    "storage_provider" "public"."storage_provider_enum" DEFAULT 'Supabase'::"public"."storage_provider_enum",
docs/repo_antigo/schema_current.sql:1385:    "storage_path" "text",
docs/repo_antigo/schema_current.sql:1972:    "user_agent" "text",
src/app/page.tsx:48:    cursor: 'pointer',
docs/contracts/pacientes/ABA01_DADOS_PESSOAIS.md:34:  - **Foto do paciente (seção lateral)**: exibe avatar a partir de `photo_path` (path do Storage; URL assinada só na exibição).
docs/contracts/pacientes/ABA01_DADOS_PESSOAIS.md:53:| Foto do paciente | Foto do paciente | `public.patients.photo_path` | `text` | `string \| null` | Não | `NULL` | **path interno no Storage** (ex.: `patients/<id>/photo.jpg`); URL assinada só na exibição; não armazenar URL pública; trim; não permitir string vazia | — | Foto do paciente (path interno). |
docs/contracts/pacientes/ABA01_DADOS_PESSOAIS.md:132:  - Foto: **`photo_path`** (path do Storage); URL assinada apenas na exibição.
docs/contracts/pacientes/ABA01_DADOS_PESSOAIS.md:352:- TODO: definir bucket/policies do Storage para `photo_path` (sem expor URLs públicas indevidas).
docs/reviews/analise-governanca-estrutura-2025-12-19/GOVERNANCE_P0_P2_FINAL_AUDIT.md:11:- Runbooks com esqueleto/rascunho: segurança (2), auditoria endpoint, storage fotos ABA01.
docs/reviews/analise-governanca-estrutura-2025-12-19/GOVERNANCE_P0_P2_FINAL_AUDIT.md:47:- P1.7 Runbooks lacunas: `docs/runbooks/{auditoria-endpoint.md,storage-photos-aba01.md}`.
docs/reviews/analise-governanca-estrutura-2025-12-19/GOVERNANCE_P0_P2_FINAL_AUDIT.md:64:- Runbooks com “(rascunho)” (P1.7/P2.18): auditoria endpoint, storage fotos ABA01, segurança (2). Ação: completar conteúdo com seções obrigatórias e validação.
docs/reviews/analise-governanca-estrutura-2025-12-19/GOVERNANCE_P0_P2_FINAL_AUDIT.md:94:- [ ] Completar 4 runbooks (segurança x2, auditoria endpoint, storage fotos ABA01) com: objetivo, pré-requisitos, passo a passo, validação, rollback, logs, troubleshooting, compliance.
src/app/pacientes/[id]/PatientPageClient.tsx:55:    cursor: 'pointer',
src/app/pacientes/[id]/PatientPageClient.tsx:63:      cursor: 'not-allowed',
src/app/pacientes/[id]/PatientPageClient.tsx:170:    cursor: 'pointer',
src/app/pacientes/[id]/PatientPageClient.tsx:696:            <p className={styles.muted}>Aba “Documentos” será integrada ao Storage + catálogo GED.</p>
docs/reviews/analise-governanca-estrutura-2025-12-19/DOCS_RESTRUCTURE_SUMMARY.md:3:Objetivo: reduzir fragmentação e deixar claro o que é arquitetura (estado atual), visão (longo prazo), governança/processo (workflow), contrato (fonte de verdade) e runbook (como operar). Todas as mudanças foram restritas a `docs/` e priorizaram mínimo impacto.
docs/reviews/analise-governanca-estrutura-2025-12-19/DOCS_RESTRUCTURE_SUMMARY.md:23:    - `docs/process/ai/gemini.md`
docs/reviews/analise-governanca-estrutura-2025-12-19/RUNBOOKS_FINAL_REVIEW.md:21:| `docs/runbooks/storage-photos-aba01.md` | OK | Conteúdo operacional completo |
docs/reviews/analise-governanca-estrutura-2025-12-19/PLANO_GOVERNANCA_REPO_P0-P3.md:175:- [x] Identificar runbooks faltantes (exemplos do diagnóstico anterior: políticas de Storage para fotos em ABA01; endpoint unificado de Auditoria).
docs/reviews/analise-governanca-estrutura-2025-12-19/PLANO_GOVERNANCA_REPO_P0-P3.md:176:- [x] Completar runbooks com conteúdo operacional (sem esqueleto). — CONCLUÍDO: [`runbooks/auditoria-endpoint.md`](../../runbooks/auditoria-endpoint.md) e [`runbooks/storage-photos-aba01.md`](../../runbooks/storage-photos-aba01.md)
docs/reviews/analise-governanca-estrutura-2025-12-19/PLANO_GOVERNANCA_REPO_P0-P3.md:267:- 2025-12-17: P1.7 — adicionados runbooks (auditoria endpoint; storage fotos ABA01) e referenciados no ONBOARDING; link-check atualizado.
src/app/pacientes/page.tsx:80:    cursor: 'pointer',
src/app/pacientes/page.tsx:162:    cursor: 'pointer',
src/components/layout/Header.tsx:78:    cursor: 'pointer',
docs/reviews/analise-governanca-estrutura-2025-12-19/DOCS_LINK_CHECK.md:41:- [docs/process/ai/README.md] → "./gemini.md" → OK
docs/reviews/analise-governanca-estrutura-2025-12-19/DOCS_LINK_CHECK.md:84:- [docs/reviews/analise-governanca-estrutura-2025-12-19/PLANO_GOVERNANCA_REPO_P0-P3.md] → "../../runbooks/storage-photos-aba01.md" → OK
docs/reviews/analise-governanca-estrutura-2025-12-19/DOCS_LINK_CHECK.md:122:- [docs/runbooks/ONBOARDING.md] → "./storage-photos-aba01.md" → OK
src/components/layout/ComingSoonPage.tsx:53:    cursor: 'pointer',
src/components/layout/CommandBar.tsx:55:    cursor: 'pointer',
docs/reviews/analise-governanca-estrutura-2025-12-19/DOCS_AUDIT_REPORT.md:30:      - gemini.md
docs/reviews/analise-governanca-estrutura-2025-12-19/DOCS_AUDIT_REPORT.md:73:| docs/process/ai/README.md | Explica o escopo da pasta de processo de IA. | NÃO | ATUAL | Dup. leve com CODEX_GUIDE/gemini.md sobre governança. |
docs/reviews/analise-governanca-estrutura-2025-12-19/DOCS_AUDIT_REPORT.md:77:| docs/process/ai/gemini.md | Manual mestre do Gemini (executor). | DEPENDE | ATUAL | Dup. de princípios (tenancy/soft delete/UI). |
docs/reviews/analise-governanca-estrutura-2025-12-19/DOCS_AUDIT_REPORT.md:146:- Policies de Storage para fotos (ABA01)
docs/reviews/analise-governanca-estrutura-2025-12-19/DOCS_AUDIT_REPORT.md:154:A documentação de docs/ está, em geral, consistente com as decisões canônicas (contratos, runbooks e arquitetura). Há duplicidades propositais (reforço de princípios) e alguns documentos explicitamente descontinuados que devem permanecer como ponte/aviso. Os principais pontos de atenção são: (a) eliminar/evitar documentos paralelos que possam divergir do canônico; (b) formalizar ADRs; (c) endereçar lacunas conhecidas (policies de Storage; endpoint de auditoria); e (d) corrigir a contradição prática da presença de `.env*` versionados, em desacordo com a política.
