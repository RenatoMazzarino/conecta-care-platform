-- Seeds de desenvolvimento local (sem segredos).
-- Objetivo: criar 2 pacientes de teste para validação da Aba 01 (Dados Pessoais).
--
-- Tenant de dev (fixo para facilitar testes):
--   tenant_id = e40046d1-b549-43ac-ad89-626b5b1a52a4
--
-- Pacientes (IDs fixos para navegação):
--   Lucas Mauricio Souza            id = 2ea4508e-4615-4ff0-9d55-68ef15d5dadb
--   Jair Roberto Cunha da Silva     id = f42bcd9e-a4f1-4bdf-8390-a5224f55d953

insert into public.patients (
  id,
  tenant_id,
  full_name,
  social_name,
  nickname,
  salutation,
  cpf,
  cpf_status,
  rg,
  rg_issuer,
  rg_issuer_state,
  rg_issued_at,
  cns,
  national_id,
  date_of_birth,
  gender,
  gender_identity,
  pronouns,
  civil_status,
  nationality,
  preferred_language,
  education_level,
  profession,
  race_color,
  is_pcd,
  birth_place,
  naturalness_city,
  naturalness_state,
  naturalness_country,
  mother_name,
  father_name,
  mobile_phone,
  secondary_phone,
  secondary_phone_type,
  email,
  email_verified,
  mobile_phone_verified,
  pref_contact_method,
  contact_time_preference,
  contact_notes,
  communication_preferences,
  doc_validation_status,
  doc_validation_method,
  doc_validation_source,
  accept_sms,
  accept_email,
  block_marketing,
  marketing_consent_status,
  marketing_consent_source,
  marketing_consent_ip,
  marketing_consent_history,
  photo_path,
  photo_consent,
  record_status,
  onboarding_step,
  is_active,
  external_ids
)
values (
  '2ea4508e-4615-4ff0-9d55-68ef15d5dadb',
  'e40046d1-b549-43ac-ad89-626b5b1a52a4',
  'Lucas Mauricio Souza',
  null,
  'Lucas',
  'Sr.',
  '12345678901',
  'unknown',
  '44556677',
  'SSP-SP',
  'SP',
  '2010-08-15',
  '123456789012345',
  'BR1234567',
  '1992-04-12',
  'M',
  'Cisgenero',
  'Ele/Dele',
  'solteiro',
  'Brasileira',
  'Português',
  'Superior Completo',
  'Enfermeiro',
  'Branca',
  false,
  'Hospital Municipal, São Paulo',
  'São Paulo',
  'SP',
  'Brasil',
  'Sandra Maria Souza',
  'Mauricio Souza',
  '11999998888',
  '1133334444',
  'residencial',
  'lucas.souza@example.com',
  false,
  false,
  'whatsapp',
  'Comercial',
  'Prefere contato via WhatsApp em horário comercial.',
  '{"sms": true, "email": true, "whatsapp": true}'::jsonb,
  'Pendente',
  'Manual',
  'Portal Administrativo (Edicao Manual)',
  true,
  true,
  false,
  'pending',
  'Portal Administrativo (Edicao Manual)',
  '127.0.0.1',
  'Criado via seed local.',
  null,
  false,
  'draft',
  1,
  false,
  '{"legacy_patient_code": "PAC-000001", "source": "seed"}'::jsonb
),
(
  'f42bcd9e-a4f1-4bdf-8390-a5224f55d953',
  'e40046d1-b549-43ac-ad89-626b5b1a52a4',
  'Jair Roberto Cunha da Silva',
  null,
  'Jair',
  'Sr.',
  '98765432100',
  'unknown',
  '99887766',
  'SSP-RJ',
  'RJ',
  '1978-02-20',
  '987654321098765',
  'BR7654321',
  '1958-11-03',
  'M',
  'Cisgenero',
  'Ele/Dele',
  'casado',
  'Brasileira',
  'Português',
  'Medio Completo',
  'Motorista',
  'Parda',
  false,
  'Niterói, RJ',
  'Niterói',
  'RJ',
  'Brasil',
  'Carmem Cunha',
  'Roberto da Silva',
  '21988887777',
  null,
  null,
  'jair.silva@example.com',
  false,
  false,
  'phone',
  'Manha',
  'Prefere ligação pela manhã.',
  '{"sms": false, "email": true, "whatsapp": false}'::jsonb,
  'Pendente',
  'Manual',
  'Importacao de Legado',
  true,
  true,
  false,
  'pending',
  'Importacao de Legado',
  '127.0.0.1',
  'Criado via seed local.',
  null,
  false,
  'draft',
  1,
  false,
  '{"legacy_patient_code": "PAC-000002", "source": "seed"}'::jsonb
)
on conflict (id) do update
set
  tenant_id = excluded.tenant_id,
  full_name = excluded.full_name,
  social_name = excluded.social_name,
  nickname = excluded.nickname,
  salutation = excluded.salutation,
  cpf = excluded.cpf,
  cpf_status = excluded.cpf_status,
  rg = excluded.rg,
  rg_issuer = excluded.rg_issuer,
  rg_issuer_state = excluded.rg_issuer_state,
  rg_issued_at = excluded.rg_issued_at,
  cns = excluded.cns,
  national_id = excluded.national_id,
  date_of_birth = excluded.date_of_birth,
  gender = excluded.gender,
  gender_identity = excluded.gender_identity,
  pronouns = excluded.pronouns,
  civil_status = excluded.civil_status,
  nationality = excluded.nationality,
  preferred_language = excluded.preferred_language,
  education_level = excluded.education_level,
  profession = excluded.profession,
  race_color = excluded.race_color,
  is_pcd = excluded.is_pcd,
  birth_place = excluded.birth_place,
  naturalness_city = excluded.naturalness_city,
  naturalness_state = excluded.naturalness_state,
  naturalness_country = excluded.naturalness_country,
  mother_name = excluded.mother_name,
  father_name = excluded.father_name,
  mobile_phone = excluded.mobile_phone,
  secondary_phone = excluded.secondary_phone,
  secondary_phone_type = excluded.secondary_phone_type,
  email = excluded.email,
  email_verified = excluded.email_verified,
  mobile_phone_verified = excluded.mobile_phone_verified,
  pref_contact_method = excluded.pref_contact_method,
  contact_time_preference = excluded.contact_time_preference,
  contact_notes = excluded.contact_notes,
  communication_preferences = excluded.communication_preferences,
  doc_validation_status = excluded.doc_validation_status,
  doc_validation_method = excluded.doc_validation_method,
  doc_validation_source = excluded.doc_validation_source,
  accept_sms = excluded.accept_sms,
  accept_email = excluded.accept_email,
  block_marketing = excluded.block_marketing,
  marketing_consent_status = excluded.marketing_consent_status,
  marketing_consent_source = excluded.marketing_consent_source,
  marketing_consent_ip = excluded.marketing_consent_ip,
  marketing_consent_history = excluded.marketing_consent_history,
  photo_path = excluded.photo_path,
  photo_consent = excluded.photo_consent,
  record_status = excluded.record_status,
  onboarding_step = excluded.onboarding_step,
  is_active = excluded.is_active,
  external_ids = excluded.external_ids;

-- ABA02: Endereco & Logistica (dados minimos para os pacientes seed)
insert into public.patient_addresses (
  id,
  tenant_id,
  patient_id,
  address_label,
  address_purpose,
  is_primary,
  postal_code,
  street,
  number,
  complement,
  neighborhood,
  city,
  state,
  country,
  reference_point,
  address_source
)
values
(
  '8a8b5c6e-2d3e-4d3e-9c3f-2a6cc5d1b201',
  'e40046d1-b549-43ac-ad89-626b5b1a52a4',
  '2ea4508e-4615-4ff0-9d55-68ef15d5dadb',
  'Residencia principal',
  'atendimento',
  true,
  '01311000',
  'Avenida Paulista',
  '1000',
  'Apto 12',
  'Bela Vista',
  'Sao Paulo',
  'SP',
  'Brasil',
  'Proximo ao MASP',
  'manual'
),
(
  '8a8b5c6e-2d3e-4d3e-9c3f-2a6cc5d1b202',
  'e40046d1-b549-43ac-ad89-626b5b1a52a4',
  'f42bcd9e-a4f1-4bdf-8390-a5224f55d953',
  'Residencia principal',
  'atendimento',
  true,
  '24020000',
  'Rua da Praia',
  '200',
  null,
  'Centro',
  'Niteroi',
  'RJ',
  'Brasil',
  'Proximo ao terminal',
  'manual'
)
on conflict (id) do update
set
  tenant_id = excluded.tenant_id,
  patient_id = excluded.patient_id,
  address_label = excluded.address_label,
  address_purpose = excluded.address_purpose,
  is_primary = excluded.is_primary,
  postal_code = excluded.postal_code,
  street = excluded.street,
  number = excluded.number,
  complement = excluded.complement,
  neighborhood = excluded.neighborhood,
  city = excluded.city,
  state = excluded.state,
  country = excluded.country,
  reference_point = excluded.reference_point,
  address_source = excluded.address_source;

insert into public.patient_address_logistics (
  address_id,
  tenant_id,
  allowed_visit_hours,
  travel_time_min,
  distance_km,
  access_conditions,
  parking,
  ambulance_access,
  night_access_risk,
  area_risk_type,
  zone_type,
  street_access_type,
  elevator_status,
  wheelchair_access,
  property_type,
  bed_type,
  mattress_type,
  electric_voltage,
  backup_power_source,
  water_source,
  cell_signal_quality
)
values
(
  '8a8b5c6e-2d3e-4d3e-9c3f-2a6cc5d1b201',
  'e40046d1-b549-43ac-ad89-626b5b1a52a4',
  'Comercial',
  35,
  12.5,
  'Portaria com cadastro previo',
  'Vaga visitante',
  'Total',
  'Baixo',
  'Urbana',
  'Urbana',
  'Rua_larga',
  'Tem_comporta_maca',
  'Livre',
  'Apartamento',
  'Hospitalar',
  'Espuma_comum',
  'Bivolt',
  'Nenhuma',
  'Rede_publica',
  'Bom'
),
(
  '8a8b5c6e-2d3e-4d3e-9c3f-2a6cc5d1b202',
  'e40046d1-b549-43ac-ad89-626b5b1a52a4',
  'Manha',
  25,
  8.2,
  'Entrada lateral',
  'Rua',
  'Total',
  'Medio',
  'Urbana',
  'Urbana',
  'Rua_estreita',
  'Nao_tem',
  'Com_restricao',
  'Casa',
  'Comum',
  'Mola',
  '110',
  'Nenhuma',
  'Rede_publica',
  'Razoavel'
)
on conflict (address_id) do update
set
  tenant_id = excluded.tenant_id,
  allowed_visit_hours = excluded.allowed_visit_hours,
  travel_time_min = excluded.travel_time_min,
  distance_km = excluded.distance_km,
  access_conditions = excluded.access_conditions,
  parking = excluded.parking,
  ambulance_access = excluded.ambulance_access,
  night_access_risk = excluded.night_access_risk,
  area_risk_type = excluded.area_risk_type,
  zone_type = excluded.zone_type,
  street_access_type = excluded.street_access_type,
  elevator_status = excluded.elevator_status,
  wheelchair_access = excluded.wheelchair_access,
  property_type = excluded.property_type,
  bed_type = excluded.bed_type,
  mattress_type = excluded.mattress_type,
  electric_voltage = excluded.electric_voltage,
  backup_power_source = excluded.backup_power_source,
  water_source = excluded.water_source,
  cell_signal_quality = excluded.cell_signal_quality;

-- ABA03: Rede de apoio (pagador e responsavel legal)
insert into public.patient_related_persons (
  id,
  tenant_id,
  patient_id,
  name,
  relationship_degree,
  role_type,
  is_legal_guardian,
  is_financial_responsible,
  is_emergency_contact,
  phone_primary,
  email,
  cpf,
  preferred_contact,
  contact_time_preference,
  is_payer,
  is_main_contact,
  contact_type
)
values
(
  'b3c7b8d0-7d6f-4d7c-b6d8-1c2f90b1a101',
  'e40046d1-b549-43ac-ad89-626b5b1a52a4',
  '2ea4508e-4615-4ff0-9d55-68ef15d5dadb',
  'Ana Souza',
  'Filha',
  'Pagador',
  false,
  true,
  true,
  '11977776666',
  'ana.souza@example.com',
  '11122233344',
  'whatsapp',
  'Comercial',
  true,
  true,
  'ResponsavelFinanceiro'
),
(
  'b3c7b8d0-7d6f-4d7c-b6d8-1c2f90b1a102',
  'e40046d1-b549-43ac-ad89-626b5b1a52a4',
  'f42bcd9e-a4f1-4bdf-8390-a5224f55d953',
  'Mariana Cunha',
  'Filha',
  'Responsavel Legal',
  true,
  false,
  false,
  '21988889999',
  'mariana.cunha@example.com',
  '55566677788',
  'email',
  'Manha',
  false,
  true,
  'ResponsavelLegal'
)
on conflict (id) do update
set
  tenant_id = excluded.tenant_id,
  patient_id = excluded.patient_id,
  name = excluded.name,
  relationship_degree = excluded.relationship_degree,
  role_type = excluded.role_type,
  is_legal_guardian = excluded.is_legal_guardian,
  is_financial_responsible = excluded.is_financial_responsible,
  is_emergency_contact = excluded.is_emergency_contact,
  phone_primary = excluded.phone_primary,
  email = excluded.email,
  cpf = excluded.cpf,
  preferred_contact = excluded.preferred_contact,
  contact_time_preference = excluded.contact_time_preference,
  is_payer = excluded.is_payer,
  is_main_contact = excluded.is_main_contact,
  contact_type = excluded.contact_type;

-- ABA04: Politicas e pagadores
insert into public.care_policy_profiles (
  id,
  tenant_id,
  name,
  description,
  rule_set,
  is_default,
  version
)
values
(
  '7d2f9f9d-4e6e-4c61-9f20-11f03b1caa01',
  'e40046d1-b549-43ac-ad89-626b5b1a52a4',
  'Particular Padrao',
  'Politica base para atendimentos particulares.',
  '{"billing_rules": {"mode": "mensalidade"}, "inventory_rules": {}, "scale_rules": {}, "document_rules": {"required": ["CONTRACT", "MEDICAL_REPORT"]}}'::jsonb,
  true,
  1
),
(
  '7d2f9f9d-4e6e-4c61-9f20-11f03b1caa02',
  'e40046d1-b549-43ac-ad89-626b5b1a52a4',
  'Operadora Home Care',
  'Politica para operadoras com controle documental ampliado.',
  '{"billing_rules": {"mode": "tabela", "billing_day": 10}, "inventory_rules": {"requires_authorization": true}, "scale_rules": {}, "document_rules": {"required": ["CONTRACT", "LEGAL_DOCS", "FINANCIAL_DOCS"]}}'::jsonb,
  false,
  1
)
on conflict (id) do update
set
  tenant_id = excluded.tenant_id,
  name = excluded.name,
  description = excluded.description,
  rule_set = excluded.rule_set,
  is_default = excluded.is_default,
  version = excluded.version;

insert into public.billing_entities (
  id,
  tenant_id,
  kind,
  name,
  legal_name,
  doc_type,
  doc_number,
  contact_email,
  contact_phone,
  billing_address_cep,
  billing_address_street,
  billing_address_number,
  billing_address_neighborhood,
  billing_address_city,
  billing_address_state
)
values
(
  'c7e6a3b0-1111-4c2c-9f21-4e2f91f1c201',
  'e40046d1-b549-43ac-ad89-626b5b1a52a4',
  'person',
  'Ana Souza',
  null,
  'CPF',
  '11122233344',
  'ana.souza@example.com',
  '11977776666',
  '01311000',
  'Avenida Paulista',
  '1000',
  'Bela Vista',
  'Sao Paulo',
  'SP'
),
(
  'c7e6a3b0-1111-4c2c-9f21-4e2f91f1c202',
  'e40046d1-b549-43ac-ad89-626b5b1a52a4',
  'insurer',
  'Unimed Regional',
  'Unimed Regional SA',
  'CNPJ',
  '12345678000199',
  'contato@unimedregional.com',
  '2122223333',
  '24020000',
  'Rua da Praia',
  '200',
  'Centro',
  'Niteroi',
  'RJ'
)
on conflict (id) do update
set
  tenant_id = excluded.tenant_id,
  kind = excluded.kind,
  name = excluded.name,
  legal_name = excluded.legal_name,
  doc_type = excluded.doc_type,
  doc_number = excluded.doc_number,
  contact_email = excluded.contact_email,
  contact_phone = excluded.contact_phone,
  billing_address_cep = excluded.billing_address_cep,
  billing_address_street = excluded.billing_address_street,
  billing_address_number = excluded.billing_address_number,
  billing_address_neighborhood = excluded.billing_address_neighborhood,
  billing_address_city = excluded.billing_address_city,
  billing_address_state = excluded.billing_address_state;

insert into public.patient_admin_financial_profile (
  patient_id,
  tenant_id,
  administrative_status,
  administrative_status_reason,
  administrative_status_changed_at,
  admission_type,
  admission_date,
  policy_profile_id,
  contract_id,
  contract_start_date,
  contract_status,
  contract_category,
  renewal_type,
  primary_payer_entity_id,
  primary_payer_related_person_id,
  payer_relation,
  financial_responsible_name,
  financial_responsible_contact,
  bond_type,
  insurer_name,
  plan_name,
  insurance_card_number,
  insurance_card_validity,
  monthly_fee,
  billing_due_day,
  billing_status,
  payment_method,
  billing_model,
  billing_periodicity,
  payment_terms,
  grace_period_days,
  readjustment_index,
  readjustment_month,
  late_fee_percent,
  daily_interest_percent,
  invoice_delivery_method,
  receiving_account_info,
  checklist_complete,
  checklist_notes,
  admin_notes
)
values
(
  '2ea4508e-4615-4ff0-9d55-68ef15d5dadb',
  'e40046d1-b549-43ac-ad89-626b5b1a52a4',
  'pendente_documentos',
  'Aguardando documentos legais.',
  '2025-12-20T10:00:00Z',
  'home_care',
  '2025-12-18',
  '7d2f9f9d-4e6e-4c61-9f20-11f03b1caa01',
  'CTR-2025-001',
  '2025-12-18',
  'Em_Implantacao',
  'Particular_Premium',
  'Automatica',
  'c7e6a3b0-1111-4c2c-9f21-4e2f91f1c201',
  'b3c7b8d0-7d6f-4d7c-b6d8-1c2f90b1a101',
  'Filha',
  'Ana Souza',
  '11977776666',
  'Particular',
  null,
  null,
  null,
  null,
  1800.00,
  5,
  'active',
  'Pix',
  'Mensalidade',
  'Mensal',
  'Pagamento ate dia 5.',
  5,
  'IPCA',
  1,
  2.0,
  0.2,
  'Email',
  'Conta 001-9 / Agencia 0001',
  false,
  'Checklist pendente de contrato assinado.',
  'Paciente em onboarding.'
),
(
  'f42bcd9e-a4f1-4bdf-8390-a5224f55d953',
  'e40046d1-b549-43ac-ad89-626b5b1a52a4',
  'pronto_para_faturar',
  'Documentacao completa.',
  '2025-12-10T10:00:00Z',
  'reabilitacao',
  '2025-11-20',
  '7d2f9f9d-4e6e-4c61-9f20-11f03b1caa02',
  'CTR-2024-045',
  '2025-11-20',
  'Ativo',
  'Convenio_Padrao',
  'Periodo_Fixo',
  'c7e6a3b0-1111-4c2c-9f21-4e2f91f1c202',
  null,
  'Operadora',
  'Central de Faturamento',
  '2122223333',
  'Plano_Saude',
  'Unimed Regional',
  'Home Care Senior',
  'UNIMED-998877',
  '2026-12-31',
  2500.00,
  10,
  'active',
  'Boleto',
  'Mensalidade',
  'Mensal',
  'Pagamento ate dia 10.',
  0,
  'IGP-M',
  5,
  1.5,
  0.1,
  'Email',
  'Conta 002-7 / Agencia 0002',
  true,
  'Checklist completo.',
  'Atendimento em execucao.'
)
on conflict (patient_id) do update
set
  tenant_id = excluded.tenant_id,
  administrative_status = excluded.administrative_status,
  administrative_status_reason = excluded.administrative_status_reason,
  administrative_status_changed_at = excluded.administrative_status_changed_at,
  admission_type = excluded.admission_type,
  admission_date = excluded.admission_date,
  policy_profile_id = excluded.policy_profile_id,
  contract_id = excluded.contract_id,
  contract_start_date = excluded.contract_start_date,
  contract_status = excluded.contract_status,
  contract_category = excluded.contract_category,
  renewal_type = excluded.renewal_type,
  primary_payer_entity_id = excluded.primary_payer_entity_id,
  primary_payer_related_person_id = excluded.primary_payer_related_person_id,
  payer_relation = excluded.payer_relation,
  financial_responsible_name = excluded.financial_responsible_name,
  financial_responsible_contact = excluded.financial_responsible_contact,
  bond_type = excluded.bond_type,
  insurer_name = excluded.insurer_name,
  plan_name = excluded.plan_name,
  insurance_card_number = excluded.insurance_card_number,
  insurance_card_validity = excluded.insurance_card_validity,
  monthly_fee = excluded.monthly_fee,
  billing_due_day = excluded.billing_due_day,
  billing_status = excluded.billing_status,
  payment_method = excluded.payment_method,
  billing_model = excluded.billing_model,
  billing_periodicity = excluded.billing_periodicity,
  payment_terms = excluded.payment_terms,
  grace_period_days = excluded.grace_period_days,
  readjustment_index = excluded.readjustment_index,
  readjustment_month = excluded.readjustment_month,
  late_fee_percent = excluded.late_fee_percent,
  daily_interest_percent = excluded.daily_interest_percent,
  invoice_delivery_method = excluded.invoice_delivery_method,
  receiving_account_info = excluded.receiving_account_info,
  checklist_complete = excluded.checklist_complete,
  checklist_notes = excluded.checklist_notes,
  admin_notes = excluded.admin_notes;

insert into public.patient_onboarding_checklist (
  id,
  tenant_id,
  patient_id,
  item_code,
  item_description,
  is_completed,
  completed_at,
  completed_by_label
)
values
(
  'f57a9f0a-0b2c-4a79-bf2a-8b1f1dd1a401',
  'e40046d1-b549-43ac-ad89-626b5b1a52a4',
  '2ea4508e-4615-4ff0-9d55-68ef15d5dadb',
  'CONTRACT',
  'Contrato assinado',
  false,
  null,
  null
),
(
  'f57a9f0a-0b2c-4a79-bf2a-8b1f1dd1a402',
  'e40046d1-b549-43ac-ad89-626b5b1a52a4',
  '2ea4508e-4615-4ff0-9d55-68ef15d5dadb',
  'MEDICAL_REPORT',
  'Relatorio medico atualizado',
  true,
  '2025-12-18T14:00:00Z',
  'Equipe Clinica'
),
(
  'f57a9f0a-0b2c-4a79-bf2a-8b1f1dd1a403',
  'e40046d1-b549-43ac-ad89-626b5b1a52a4',
  '2ea4508e-4615-4ff0-9d55-68ef15d5dadb',
  'LEGAL_DOCS',
  'Documentos legais completos',
  false,
  null,
  null
),
(
  'f57a9f0a-0b2c-4a79-bf2a-8b1f1dd1a404',
  'e40046d1-b549-43ac-ad89-626b5b1a52a4',
  'f42bcd9e-a4f1-4bdf-8390-a5224f55d953',
  'CONTRACT',
  'Contrato assinado',
  true,
  '2025-11-20T09:00:00Z',
  'Equipe Administrativa'
),
(
  'f57a9f0a-0b2c-4a79-bf2a-8b1f1dd1a405',
  'e40046d1-b549-43ac-ad89-626b5b1a52a4',
  'f42bcd9e-a4f1-4bdf-8390-a5224f55d953',
  'LEGAL_DOCS',
  'Documentos legais completos',
  true,
  '2025-11-18T09:00:00Z',
  'Equipe Administrativa'
),
(
  'f57a9f0a-0b2c-4a79-bf2a-8b1f1dd1a406',
  'e40046d1-b549-43ac-ad89-626b5b1a52a4',
  'f42bcd9e-a4f1-4bdf-8390-a5224f55d953',
  'FINANCIAL_DOCS',
  'Documentos financeiros completos',
  true,
  '2025-11-19T09:00:00Z',
  'Equipe Administrativa'
)
on conflict (id) do update
set
  tenant_id = excluded.tenant_id,
  item_description = excluded.item_description,
  is_completed = excluded.is_completed,
  completed_at = excluded.completed_at,
  completed_by_label = excluded.completed_by_label;
